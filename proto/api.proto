syntax = "proto3";

import "proto/db.proto";
package api;

message EmptyReq {}
message EmptyResp {}
message ErrorResp {
    string err_msg = 1;
}

// --- choice question ---
message CreateChoiceQuestionReq {
    db.ChoiceQuestion.Type type = 1;
    string description = 2;
    db.ChoiceQuestion.Option single_answser = 3; // 单选答案
    repeated db.ChoiceQuestion.Option multiple_answser = 4; // 多选答案
    repeated db.ChoiceQuestion.Content contents = 5; // 题目内容
}

message CreateChoiceQuestionResp {
    db.ChoiceQuestion choice_question = 1;
}

message GetChoiceQuestionReq {
    int32 q_id = 1;
}

message GetChoiceQuestionResp {
    db.ChoiceQuestion choice_question = 1;
}

message ListChoiceQuestionReq {
    message Filters {
        int32 q_id = 1;
        string description = 2;
    }
    int32 current = 1;
    int32 page_size = 2;
    Filters filters = 3;
}

message ListChoiceQuestionResp {
    int32 total = 1;
    repeated db.ChoiceQuestion data = 2;
}

// --- judge question ---
message CreateJudgeQuestionReq {
    string description = 1;
    bool answser = 2;
}

message CreateJudgeQuestionResp {
    db.JudgeQuestion judge_question = 1;
}

message GetJudgeQuestionReq {
    int32 q_id = 1;
}

message GetJudgeQuestionResp {
    db.JudgeQuestion judge_question = 1;
}

message ListJudgeQuestionReq {
    message Filters {
        int32 q_id = 1;
        string description = 2;
    }
    int32 current = 1;
    int32 page_size = 2;
    Filters filters = 3;
}

message ListJudgeQuestionResp {
    int32 total = 1;
    repeated db.JudgeQuestion data = 2;
}

// --- exam ---
message CreateExamPaperReq {
    string title = 1;
    repeated int32 judge_id_list = 2;
    repeated int32 choice_id_list = 3;
}

message CreateExamPaperResp {
    db.ExamPaper exam_paper = 1;
}

message GetExamPaperReq {
    int32 e_id = 1;
}

message GetExamPaperResp {
    db.ExamPaper exam_paper = 1;
    repeated db.JudgeQuestion judge_questions = 2;
    repeated db.ChoiceQuestion choice_questions = 3;
}

message ListExamPaperReq {
    repeated int32 exam_id_list = 1;
}

message ListExamPaperResp {
    map<int32, db.ExamPaper> exam_papers = 1;
}